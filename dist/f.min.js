!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.f=e.f||{})}(this,function(e){"use strict";function t(e,t){var n=document.createElement(e);for(var r in t)null!=n[r]?n[r]=t[r]:n.setAttribute(r,t[r]);for(var i=2;i<arguments.length;i++)l(n,arguments[i]);return n}function n(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)n.setAttribute(r,t[r]);for(var i=2;i<arguments.length;i++)l(n,arguments[i]);return n}function r(e,t,n){return new i(e,t,n)}function i(e,t,n){this.View=e,this.key=t,this.lookup=null!=t?{}:[],this.views=[],this.initData=n}function o(e,t){t.remove(function(){a(e,t)})}function l(e,t){return t instanceof i?(t.parent=e,void f(e,t.views)):void(t.el?((e.el||e).appendChild(t.el),t.parent?t.reorder&&t.reorder():t.mount&&t.mount(),t.parent=e):(e.el||e).appendChild(t))}function u(e,t,n){t.el?((e.el||e).insertBefore(t.el,n.el||n),t.parent?t.reorder&&t.reorder():t.mount&&t.mount(),t.parent=e):(e.el||e).insertBefore(t,n.el||n)}function a(e,t){t.el?((e.el||e).removeChild(t.el),t.parent=null,t.unmount&&t.unmount()):(e.el||e).removeChild(t)}function f(e,t){for(var n=(e.el||e).firstChild,r=0;r<t.length;r++){var i=t[r],o=i.el||i;o!==n?n?u(e,i,n):l(e,i):n=n.nextSibling}for(;n;){var a=n.nextSibling;n.removing||(e.el||e).removeChild(n),n=a}}i.prototype.update=function(e,t){for(var n=this.View,r=this.key,i=this.lookup,l={},u=this.views=new Array(e.length),s=[],d=[],h=[],p=0;p<e.length;p++){var v=e[p],m=null!=r?v[r]:p,c=i[m];c?d[d.length]=c:(c=new n(this.initData,v),s[s.length]=c),c.update&&c.update(v),u[p]=c,l[m]=c}for(var m in i)if(!l[m]){var c=i[m];h[h.length]=c,c.el.removing=!0}this.parent&&f(this.parent,u);for(var p=0;p<u.length;p++){var v=e[p],c=u[p];c.updated&&c.updated(v)}this.lookup=l,t&&t({added:s,updated:d,removed:h});for(var p=0;p<h.length;p++){var c=h[p];c.remove?this.parent&&o(this.parent,c):this.parent&&a(this.parent,c)}return this},e.el=t,e.svg=n,e.list=r,e.List=i,e.mount=l,e.mountBefore=u,e.unmount=a,e.setChildren=f});