!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.f=e.f||{})}(this,function(e){"use strict";function t(e){for(var t=document.createElement(e),n=1;n<arguments.length;n++){var r=arguments[n];if(1!==n||"object"!=typeof r)"string"==typeof r?u(t,document.createTextNode(r)):u(t,r);else for(var o in r)null!=t[o]?t[o]=r[o]:t.setAttribute(o,r[o])}return t}function n(e){for(var t=document.createElementNS("http://www.w3.org/2000/svg",e),n=1;n<arguments.length;n++){var r=arguments[n];if(1!==n||"object"!=typeof r)"string"==typeof r?u(t,document.createTextNode(r)):u(t,r);else for(var o in r)t.setAttribute(o,r[o])}return t}function r(e,t,n){return new o(e,t,n)}function o(e,t,n){this.View=e,this.key=t,this.initData=n,this.lookup=null!=t?{}:[],this.views=[]}function i(e,t){t.remove(function(){l(e,t)})}function u(e,t){var n=e.el||e,r=t.el||t;return t instanceof o?(t.parent=e,void f(e,t.views)):void(t.el?(n.appendChild(r),t.parent?t.reorder&&t.reorder():t.mount&&t.mount(),t.parent=e):n.appendChild(r))}function a(e,t,n){var r=e.el||e,o=t.el||t,i=n.el||n;r.insertBefore(o,i),t.el&&(t.parent?t.reorder&&t.reorder():t.mount&&t.mount(),t.parent=e)}function l(e,t){var n=e.el||e,r=t.el||t;n.removeChild(r),t.el&&(t.parent=null,t.unmount&&t.unmount())}function f(e,t){for(var n=e.el||e,r=n.firstChild,o=0;o<t.length;o++){var i=t[o],l=i.el||i;l!==r?r?a(e,i,r):u(e,i):r=r.nextSibling}for(;r;){var f=r.nextSibling;r.removing||n.removeChild(r),r=f}}o.prototype.update=function(e,t){var n=this.View,r=this.key,o=this.lookup,u=this.views,a=r?{}:[],s=[],h=[],p=[];u.length=e.length;for(var d=0;d<e.length;d++){var v=e[d],c=null!=r?v[r]:d,m=o[c];m?h[h.length]=m:(m=new n(this.initData,v),s[s.length]=m),m.update&&m.update(v),u[d]=m,a[c]=m}for(var c in o)if(!a[c]){var m=o[c];m.el.removing=!0,p[p.length]=m}this.parent&&f(this.parent,u);for(var d=0;d<u.length;d++){var v=e[d],m=u[d];m.updated&&m.updated(v)}this.lookup=a,t&&t(s,h,p);for(var d=0;d<p.length;d++){var m=p[d];m.remove?this.parent&&i(this.parent,m):this.parent&&l(this.parent,m)}return this},e.el=t,e.svg=n,e.list=r,e.List=o,e.mount=u,e.mountBefore=a,e.unmount=l,e.setChildren=f});