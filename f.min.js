!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.f=e.f||{})}(this,function(e){"use strict";function t(e){return document.createTextNode(e)}function n(e,n){for(var r=document.createElement(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o){var l="string"==typeof o;if(i>1||l||(o.el||o)instanceof Node)l?u(r,t(o)):u(r,o);else if(1===i)for(var a in o)null!=r[a]?r[a]=o[a]:r.setAttribute(a,o[a])}}return r}function r(e){for(var n=document.createElementNS("http://www.w3.org/2000/svg",e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i){var o="string"==typeof i;if(r>1||o||(i.el||i)instanceof Node)o?u(n,t(i)):u(n,i);else if(1===r)for(var l in i)n.setAttribute(l,i[l])}}return n}function i(e,t,n){return new o(e,t,n)}function o(e,t,n){this.View=e,this.key=t,this.initData=n,this.lookup=null!=t?{}:[],this.views=[]}function l(e,t){t.remove(function(){f(e,t)})}function u(e,t){var n=e.el||e,r=t.el||t;return t instanceof o?(t.parent=e,void s(e,t.views)):void(t.el?(n.appendChild(r),t.parent?t.reorder&&t.reorder():t.mount&&t.mount(),t.parent=e):n.appendChild(r))}function a(e,t,n){var r=e.el||e,i=t.el||t,o=n.el||n;r.insertBefore(i,o),t.el&&(t.parent?t.reorder&&t.reorder():t.mount&&t.mount(),t.parent=e)}function f(e,t){var n=e.el||e,r=t.el||t;n.removeChild(r),t.el&&(t.parent=null,t.unmount&&t.unmount())}function s(e,t){for(var n=e.el||e,r=n.firstChild,i=0;i<t.length;i++){var o=t[i],l=o.el||o;l!==r?r?a(e,o,r):u(e,o):r=r.nextSibling}for(;r;){var f=r.nextSibling;r.removing||n.removeChild(r),r=f}}o.prototype.update=function(e,t){var n=this.View,r=this.key,i=this.lookup,o=this.views,u=r?{}:[],a=[],h=[],v=[];o.length=e.length;for(var p=0;p<e.length;p++){var d=e[p],c=null!=r?d[r]:p,m=i[c];m?h[h.length]=m:(m=new n(this.initData,d),a[a.length]=m),m.update&&m.update(d),o[p]=m,u[c]=m}for(var c in i)if(!u[c]){var m=i[c];m.el.removing=!0,v[v.length]=m}this.parent&&s(this.parent,o);for(var p=0;p<o.length;p++){var d=e[p],m=o[p];m.updated&&m.updated(d)}this.lookup=u,t&&t(a,h,v);for(var p=0;p<v.length;p++){var m=v[p];m.remove?this.parent&&l(this.parent,m):this.parent&&f(this.parent,m)}return this},e.text=t,e.el=n,e.svg=r,e.list=i,e.List=o,e.mount=u,e.mountBefore=a,e.unmount=f,e.setChildren=s});