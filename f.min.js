!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.f=e.f||{})}(this,function(e){"use strict";function t(e,t){var n=document.createElement(e);for(var r in t)null!=n[r]?n[r]=t[r]:n.setAttribute(r,t[r]);for(var i=2;i<arguments.length;i++)u(n,arguments[i]);return n}function n(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)n.setAttribute(r,t[r]);for(var i=2;i<arguments.length;i++)u(n,arguments[i]);return n}function r(e,t,n){return new i(e,t,n)}function i(e,t,n){this.View=e,this.key=t,this.initData=n,this.lookup=null!=t?{}:[],this.views=[]}function o(e,t){t.remove(function(){l(e,t)})}function u(e,t){var n=e.el||e,r=t.el||t;return t instanceof i?(t.parent=e,void f(e,t.views)):void(t.el?(n.appendChild(r),t.parent?t.reorder&&t.reorder():t.mount&&t.mount(),t.parent=e):n.appendChild(r))}function a(e,t,n){var r=e.el||e,i=t.el||t,o=n.el||n;r.insertBefore(i,o),t.el&&(t.parent?t.reorder&&t.reorder():t.mount&&t.mount(),t.parent=e)}function l(e,t){var n=e.el||e,r=t.el||t;n.removeChild(r),t.el&&(t.parent=null,t.unmount&&t.unmount())}function f(e,t){for(var n=e.el||e,r=n.firstChild,i=0;i<t.length;i++){var o=t[i],l=o.el||o;l!==r?r?a(e,o,r):u(e,o):r=r.nextSibling}for(;r;){var f=r.nextSibling;r.removing||n.removeChild(r),r=f}}i.prototype.update=function(e,t){var n=this.View,r=this.key,i=this.lookup,u=this.views,a=r?{}:[],h=[],s=[],v=[];u.length=e.length;for(var p=0;p<e.length;p++){var d=e[p],c=null!=r?d[r]:p,m=i[c];m?s[s.length]=m:(m=new n(this.initData,d),h[h.length]=m),m.update&&m.update(d),u[p]=m,a[c]=m}for(var c in i)if(!a[c]){var m=i[c];m.el.removing=!0,v[v.length]=m}this.parent&&f(this.parent,u);for(var p=0;p<u.length;p++){var d=e[p],m=u[p];m.updated&&m.updated(d)}this.lookup=a,t&&t(h,s,v);for(var p=0;p<v.length;p++){var m=v[p];m.remove?this.parent&&o(this.parent,m):this.parent&&l(this.parent,m)}return this},e.el=t,e.svg=n,e.list=r,e.List=i,e.mount=u,e.mountBefore=a,e.unmount=l,e.setChildren=f});